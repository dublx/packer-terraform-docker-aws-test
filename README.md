# Description
Playground for Packer and Terraform to build a Docker based cloud cluster.  

Keeps build history of Packer build's Terraform states over iterations to your cloud configuration. Build history is stored in `builds/`. 

Must have the AWS key/secret pair in ENV vars `AWS_ACCESS_KEY` and `AWS_SECRET_KEY` 


# Install
```shell
git clone git@github.com:dublx/packer-terraform-docker-aws-test.git 
```

# Usage
```shell
./run.sh --new --packer-build --tf-plan --tf-apply
```
Or pack&plan and then apply.
```shell
./run.sh --new --packer-build --tf-plan
# get your build ID (see builds/ folder for the YYYYMMDD_HHMMSS that you just generated by using the --new flag)
# iterative process goes here where you change your Terraform configuration until you're ready to do 'terraform apply'
# Run './run.sh --build=20140731_1811 --tf-plan' until you've reached your goal.
# Apply your Terraform plan by doing 
./run.sh --build=20140731_1811 --tf-apply
```

